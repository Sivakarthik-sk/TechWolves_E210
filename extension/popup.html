<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SiteSherpa Cortex</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { width: 380px; height: 550px; margin: 0; background: #0b0f19; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; }
        
        .header { padding: 15px; background: #111827; border-bottom: 1px solid #374151; display: flex; justify-content: space-between; align-items: center; }
        .badge { background: #3b82f6; font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; }

        .chat-area { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        .msg { padding: 10px; border-radius: 8px; font-size: 13px; line-height: 1.4; max-width: 85%; }
        .user { background: #374151; align-self: flex-end; border-bottom-right-radius: 0; }
        .ai { background: #1f2937; align-self: flex-start; border-left: 3px solid #3b82f6; border-bottom-left-radius: 0; }
        
        /* PLAN GRAPH VISUALIZER */
        .plan-card { background: #000; border: 1px solid #333; padding: 10px; border-radius: 6px; margin-top: 5px; }
        .plan-step { display: flex; align-items: center; gap: 8px; font-size: 11px; margin-bottom: 4px; color: #9ca3af; }
        .plan-step.active { color: #3b82f6; font-weight: bold; }
        .plan-step i { font-size: 8px; }

        /* SAFETY ALERT */
        .safety-modal { background: #450a0a; border: 1px solid #ef4444; padding: 10px; border-radius: 6px; display: none; margin-top: 10px; }
        .safety-title { color: #fca5a5; font-weight: bold; font-size: 12px; margin-bottom: 5px; display: flex; align-items: center; gap: 5px; }
        .safety-btns { display: flex; gap: 5px; margin-top: 10px; }
        
        .input-area { padding: 15px; background: #111827; border-top: 1px solid #374151; display: flex; gap: 8px; }
        input { flex: 1; background: #1f2937; border: 1px solid #374151; color: white; padding: 10px; border-radius: 6px; outline: none; }
        button { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; color: white; font-weight: bold; }
        .mic { background: #ef4444; } .go { background: #3b82f6; } .confirm { background: #ef4444; width: 100%; }

        /* Dynamic Form */
        #dynamic-form { display: none; background: #1f2937; padding: 10px; margin: 10px; border-radius: 6px; }
        .login-input { width: 90%; margin-bottom: 5px; padding: 8px; background: #374151; border: 1px solid #4b5563; color: white; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <span>SiteSherpa Cortex</span>
        <span class="badge">TIER-1 SYSTEM</span>
    </div>

    <div class="chat-area" id="chatBox">
        <div class="msg ai">
            System Online. 
            <br><i>Ready for complex tasking.</i>
        </div>
    </div>

    <div id="safetyModal" class="safety-modal">
        <div class="safety-title"><i class="fas fa-exclamation-triangle"></i> HIGH RISK ACTION</div>
        <div id="safetyMsg" style="font-size: 11px; color: #fee2e2;"></div>
        <div class="safety-btns">
            <button id="safetyConfirmBtn" class="confirm">AUTHORIZE</button>
        </div>
    </div>

    <div id="dynamic-form">
        <div style="font-size:11px; margin-bottom:5px; color:#9ca3af;">AUTHENTICATION REQUIRED</div>
        <div id="form-inputs"></div>
        <button id="formSubmit" class="go" style="width:100%; margin-top:5px;">Login</button>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="Command...">
        <button id="micBtn" class="mic"><i class="fas fa-microphone"></i></button>
        <button id="sendBtn" class="go"><i class="fas fa-paper-plane"></i></button>
    </div>

    <script src="popup.js"></script>
</body>
</html>